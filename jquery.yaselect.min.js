(function(a){a.fn.yaselect=function(b){function d(a){var b="",c=0;return a[0].selectedIndex&&(c=a[0].selectedIndex),b=a.find("option:nth("+c+")").text()}function e(a,b){var c=d(a);c===""&&(c=a.children("option:selected").text()),c+='<div class="yaselect-right-image"></div>',b.html(c)}function f(a,b,c,d){a.blur(),e(a,b),d&&c.focus()}function g(a){a.toggleClass("yaselect-open yaselect-close")}function h(){return navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)}var c={individualStyling:!0,size:5,reuseWidth:!0};return b=a.extend(c,b),this.each(function(c,d){var p,i=a(d).addClass("yaselect-select"),j=a('<div class="yaselect-wrap yaselect-open"><div class="yaselect-current"></div></div>'),k=j.wrap('<div class="yaselect-anchor"></div>').parent(),l=j.find(".yaselect-current"),m=0,n=i.find("option"),o=i[0].selectedIndex;if(e(i,l),b.individualStyling&&j.addClass("yaselect-wrap-"+c),h()?(g(j),i.before(k).css({opacity:.001,left:0,top:0,zIndex:10}).on("change",function(){e(i,l)}).appendTo(k)):i.before(k).on("keydown",function(a){(a.keyCode===13||a.keyCode===32)&&(a.preventDefault(),f(i,l,j,!0))}).on("change",function(){e(i,l)}).on("blur",function(){i.css("z-index",0).hide(),g(j)}).on("click",function(){i.is(":hidden")?(g(j),i.css("z-index",1).show(),setTimeout(function(){i.focus()})):f(i,l,j,!0)}).appendTo(k),j.on("mousedown",function(){i.click()}).on("keydown",function(b){var c=[13,32,37,38,39,40];a.inArray(b.keyCode,c)!==-1&&(b.preventDefault(),i.click())}),b.reuseWidth&&(n.each(function(){var b=0;n.removeAttr("selected"),a(this).attr("selected","selected"),e(i,l),b=k.outerWidth(),b>m&&(m=b)}),n.removeAttr("selected").eq(o).attr("selected","selected"),m+=j.find(".yaselect-right-image").outerWidth(),k.width(m)),h()){i.css("width",k.width());while(k.outerHeight()>i.outerHeight())p=parseInt(i.css("fontSize"),10),i.css("fontSize",p+1+"px");b.size=1}d.size=b.size,f(i,l,j,!1)})}})(jQuery)